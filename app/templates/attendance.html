{% extends "base.html" %}

{% block title %}Employee Attendance{% endblock %}

{% block content %}
<h1 class="centered-heading">Employee Attendance</h1>

<div class="attendance-container">
    <!-- Clock In Section -->
    <div class="attendance-section clock-in">
        <h2>Clock In</h2>
        <form method="POST">
            <input type="hidden" name="action" value="clock_in">
           
            <select name="employee_id" required>
                <option value="" disabled selected>Please select an employee</option>
                {% for employee in employees %}
                <option value="{{ employee.id }}">{{ employee.first_name }} {{ employee.last_name }}</option>
                {% endfor %}
            </select>

            <!-- Adjust Time Checkbox -->
            <div class="checkbox-container">
                <label for="adjust_time_in">Adjust Time</label>
                <input type="checkbox" id="adjust_time_in" name="adjust_time">
            </div>

            <div id="time_input_in" class="custom-time-container">
                <label for="custom_time_in">Select Time & Date</label>
                <input type="text" id="custom_time_in" name="custom_time" class="datetimepicker">
            </div>

            <button type="submit" class="btn btn-success">Clock In</button>
        </form>
    </div>

    <!-- Clock Out Section -->
    <div class="attendance-section clock-out">
        <h2>Clock Out</h2>
        <form method="POST">
            <input type="hidden" name="action" value="clock_out">
           
            <select name="employee_id" required>
                <option value="" disabled selected>Please select an employee</option>
                {% for employee in employees %}
                <option value="{{ employee.id }}">{{ employee.first_name }} {{ employee.last_name }}</option>
                {% endfor %}
            </select>

            <!-- Adjust Time Checkbox -->
            <div class="checkbox-container">
                <label for="adjust_time_out">Adjust Time</label>
                <input type="checkbox" id="adjust_time_out" name="adjust_time">
            </div>

            <div id="time_input_out" class="custom-time-container">
                <label for="custom_time_out">Select Time & Date</label>
                <input type="text" id="custom_time_out" name="custom_time" class="datetimepicker">
            </div>

            <button type="submit" class="btn btn-danger">Clock Out</button>
        </form>
    </div>
</div>

<!-- Include jQuery and DateTimePicker Script -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.css">

<!-- DateTime Picker Initialization -->
<script>
    $(document).ready(function () {
        $(".datetimepicker").datetimepicker({
            dateFormat: "yy-mm-dd",
            timeFormat: "HH:mm:ss",
            controlType: "select",
            oneLine: true,
            showButtonPanel: true,
            changeMonth: true,
            changeYear: true
        });

        $("#adjust_time_in").change(function () {
            $("#time_input_in").toggle(this.checked);
        });

        $("#adjust_time_out").change(function () {
            $("#time_input_out").toggle(this.checked);
        });
    });
</script>
{% endblock %}
